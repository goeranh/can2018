install.packages("base64enc")
library(readxl)
library(readxl)
sheet_list = excel_sheets()
sheet_list = excel_sheets("data/ResultatKortvers2013_16.xlsx")
sheet_list
library(tidyverse)
library(tidyverse)
library(readxl)
tmp = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53")
View(tmp)
tmp = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = kommun1, y13_9_tot, y13_9_p, y13_9_f,
kommun2, y16_9_tot, y16_9_p, y16_9_f, redovis,
kommun3, y13_2_tot, y13_2_p, y13_2_f,
kommun4, y16_2_tot, y16_2_p, y16_2_f, redovis)
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2")
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2")
tmp = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"))
komid <- read_excel("data/kommunnycklar.xlsx")
library(readxl)
komid <- read_excel("data/kommunnycklar.xlsx")
View(komid)
tmp = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"))
View(komid)
View(tmp)
tmp_kom <- tmp %>%
filter(kommun1 == "Partille")
library(tidyverse)
tmp = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"))
tmp_kom <- tmp %>%
filter(kommun1 == "Partille")
tmp_kom <- tmp %>%
filter(trim(kommun1) == "Partille")
tmp = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"),
trim_ws = TRUE)
tmp = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"),
trimws = TRUE)
tmp = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"),
trim_ws = TRUE)
tmp = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"),
trim_ws = TRUE)
tmp$kommun1 <- str_trim(tmp$kommun1, side = "both")
tmp_kom <- tmp %>%
filter(trim(kommun1) == "Partille")
tmp_kom <- tmp %>%
filter(kommun1 == "Partille")
View(tmp_kom)
sheet_list = excel_sheets("data/ResultatKortvers2013_16.xlsx")
tmp_antal = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"),
trim_ws = TRUE)
tmp_antal = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"),
trim_ws = TRUE) %>%
mutate(kommun1 = str_trim(tmp_antal$kommun1, side = "both"),
kommun2 = str_trim(tmp_antal$kommun2, side = "both"),
kommun3 = str_trim(tmp_antal$kommun3, side = "both"))
library(tidyverse)
# redovisad kommun
studkom = "Partille"
tmp_antal = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"),
trim_ws = TRUE) %>%
mutate(kommun1 = str_trim(tmp_antal$kommun1, side = "both"),
kommun2 = str_trim(tmp_antal$kommun2, side = "both"),
kommun3 = str_trim(tmp_antal$kommun3, side = "both"))
tmp_kom <- tmp_antal %>%
filter(kommun1 == studkom)
# antal elever
library(tidyverse)
# redovisad kommun
studkom = "Partille"
tmp_antal = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"),
trim_ws = TRUE) %>%
mutate(kommun1 = str_trim(tmp_antal$kommun1, side = "both"),
kommun2 = str_trim(tmp_antal$kommun2, side = "both"),
kommun3 = str_trim(tmp_antal$kommun3, side = "both"))
tmp_kom <- tmp_antal %>%
filter(kommun1 == studkom)
# antal elever
mutate(tmp_antal, kommun1 = str_trim(tmp_antal$kommun1, side = "both"),
kommun2 = str_trim(tmp_antal$kommun2, side = "both"),
kommun3 = str_trim(tmp_antal$kommun3, side = "both"))
tmp_antal <- tmp_antal %>%
mutate(kommun1 = str_trim(tmp_antal$kommun1, side = "both"),
kommun2 = str_trim(tmp_antal$kommun2, side = "both"),
kommun3 = str_trim(tmp_antal$kommun3, side = "both"))
tmp_kom <- tmp_antal %>%
filter(kommun1 == studkom)
library(tidyverse)
# redovisad kommun
studkom = "Partille"
tmp_antal = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"),
trim_ws = TRUE) %>%
tmp_antal <- tmp_antal %>%
mutate(kommun1 = str_trim(tmp_antal$kommun1, side = "both"),
kommun2 = str_trim(tmp_antal$kommun2, side = "both"),
kommun3 = str_trim(tmp_antal$kommun3, side = "both"))
View(tmp_antal)
tmp_antal = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"),
trim_ws = TRUE) %>%
tmp_antal <- tmp_antal %>%
mutate(kommun1 = str_trim(kommun1, side = "both"),
kommun2 = str_trim(kommun2, side = "both"),
kommun3 = str_trim(kommun3, side = "both"))
tmp_antal = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"),
trim_ws = TRUE) %>%
tmp_antal <- tmp_antal %>%
mutate(kommun1 = str_trim(kommun1, side = "both"),
kommun2 = str_trim(kommun2, side = "both"),
kommun3 = str_trim(kommun3, side = "both"))
tmp = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"),
trim_ws = TRUE) %>%
tmp_antal <- tmp_antal %>%
mutate(kommun1 = str_trim(kommun1, side = "both"),
kommun2 = str_trim(kommun2, side = "both"),
kommun3 = str_trim(kommun3, side = "both"))
tmp = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"),
trim_ws = TRUE) %>%
tmp_antal <- tmp_antal %>%
mutate(kommun1 = str_trim(kommun1, side = "both"),
kommun2 = str_trim(kommun2, side = "both"),
kommun3 = str_trim(kommun3, side = "both"))
tmp = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"),
trim_ws = TRUE) %>%
#  tmp_antal <- tmp_antal %>%
mutate(kommun1 = str_trim(kommun1, side = "both"),
kommun2 = str_trim(kommun2, side = "both"),
kommun3 = str_trim(kommun3, side = "both"))
tmp = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"),
trim_ws = TRUE) %>%
#  tmp_antal <- tmp_antal %>%
mutate(kommun1 = str_trim(kommun1, side = "both"),
kommun2 = str_trim(kommun2, side = "both"),
kommun3 = str_trim(kommun3, side = "both"),
kommun4 = str_trim(kommun4, side = "both"))
library(tidyverse)
# redovisad kommun
studkom = "Partille"
tmp_antal = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"),
trim_ws = TRUE) %>%
#  tmp_antal <- tmp_antal %>%
mutate(kommun1 = str_trim(kommun1, side = "both"),
kommun2 = str_trim(kommun2, side = "both"),
kommun3 = str_trim(kommun3, side = "both"),
kommun4 = str_trim(kommun4, side = "both"))
# tmp_antal <- tmp_antal %>%
# mutate(kommun1 = str_trim(tmp_antal$kommun1, side = "both"),
#        kommun2 = str_trim(tmp_antal$kommun2, side = "both"),
#        kommun3 = str_trim(tmp_antal$kommun3, side = "both"))
#
tmp_kom <- tmp_antal %>%
filter(kommun1 == studkom)
# antal elever
studkom <- komid$Hemkommun[3]
studkom <- str_trim(komid$Hemkommun[3], side = "both")
tmp_antal = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"),
trim_ws = TRUE) %>%
mutate(kommun1 = str_trim(kommun1, side = "both"),
kommun2 = str_trim(kommun2, side = "both"),
kommun3 = str_trim(kommun3, side = "both"),
kommun4 = str_trim(kommun4, side = "both"))
tmp_kom <- tmp_antal %>%
filter(kommun1 == studkom)
dir("/data/")
dir("/data")
dir()
dir("/data")
dir("./data")
dir("./data")
library(tidyverse)
library(readxl)
studkom <- str_trim(komid$Hemkommun[3], side = "both")
studkom
tmp = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"),
trim_ws = TRUE) %>%
mutate(kommun1 = str_trim(kommun1, side = "both"),
kommun2 = str_trim(kommun2, side = "both"),
kommun3 = str_trim(kommun3, side = "both"))
tmp = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2"),
trim_ws = TRUE) %>%
mutate(kommun1 = str_trim(kommun1, side = "both"),
kommun2 = str_trim(kommun2, side = "both"),
kommun3 = str_trim(kommun3, side = "both"),
kommun4 = str_trim(kommun4, side = "both"))
tmp_kom <- tmp_antal %>%
filter(kommun1 == studkom)
tmp = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2")) %>%
mutate(kommun1 = str_trim(kommun1, side = "both"),
kommun2 = str_trim(kommun2, side = "both"),
kommun3 = str_trim(kommun3, side = "both"),
kommun4 = str_trim(kommun4, side = "both"))
tmp_kom <- tmp_antal %>%
filter(kommun1 == studkom)
library(readxl)
sheet_list = excel_sheets("data/ResultatKortvers2013_16.xlsx")
sheet_list
komid <- read_excel("data/kommunnycklar.xlsx")
library(tidyverse)
library(readxl)
studkom <- str_trim(komid$Hemkommun[3], side = "both")
studkom
tmp_antal = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 1, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2")) %>%
mutate(kommun1 = str_trim(kommun1, side = "both"),
kommun2 = str_trim(kommun2, side = "both"),
kommun3 = str_trim(kommun3, side = "both"),
kommun4 = str_trim(kommun4, side = "both"))
tmp_kom <- tmp_antal %>%
filter(kommun1 == studkom)
View(tmp_kom)
tmp_health = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 7, range = "A3:R53",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f", "redovis",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f", "redovis2")) %>%
mutate(kommun1 = str_trim(kommun1, side = "both"),
kommun2 = str_trim(kommun2, side = "both"),
kommun3 = str_trim(kommun3, side = "both"),
kommun4 = str_trim(kommun4, side = "both"))
tmp_kom <- tmp_health %>%
filter(kommun1 == studkom)
View(tmp_kom)
tmp_health = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 7, range = "A3:P52",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f")) %>%
mutate(kommun1 = str_trim(kommun1, side = "both"),
kommun2 = str_trim(kommun2, side = "both"),
kommun3 = str_trim(kommun3, side = "both"),
kommun4 = str_trim(kommun4, side = "both"))
tmp_kom <- tmp_health %>%
filter(kommun1 == studkom)
library(tidyverse)
jfr <-  tmp_kom %>%
ifelse(y16_9_f > y16_9_p, "fler", "färre")
jfr <-  tmp_kom %>%
ifelse(y16_9_f > y16_9_p, yes = "fler", no = "färre")
jfr <-  tmp_kom %>%
ifelse(y16_9_f>y16_9_p, yes = "fler", no = "färre")
jfr <-  tmp_kom %>%
if_else(y16_9_f>y16_9_p, yes = "fler", no = "färre")
if_else(0.6 > 0.9, "fler", "färre")
if_else(0.96 > 0.9, "fler", "färre")
jfr <- if_else(0.96 > 0.9, "fler", "färre")
jfr <- if_else(0.66 > 0.9, "fler", "färre")
jfr <-  if_else(tmp_kom$y16_9_f > tmp_kom$y16_9_p, yes = "fler", no = "färre")
jfr <-  if_else(tmp_kom$y16_9_f > tmp_kom$y16_9_p, "fler", "färre")
tmp_kom <- tmp_health %>%
filter(kommun1 == studkom | kommun1 == "VGR")
View(tmp_health)
tmp_kom <- tmp_health %>%
filter(kommun1 == studkom | kommun1 == "VGR*")
tmp_health = read_excel("data/ResultatKortvers2013_16.xlsx", sheet = 7, range = "A3:P52",
col_names = c("kommun1", "y13_9_tot", "y13_9_p", "y13_9_f",
"kommun2", "y16_9_tot", "y16_9_p", "y16_9_f",
"kommun3", "y13_2_tot", "y13_2_p", "y13_2_f",
"kommun4", "y16_2_tot", "y16_2_p", "y16_2_f")) %>%
mutate(kommun1 = str_trim(kommun1, side = "both"),
kommun2 = str_trim(kommun2, side = "both"),
kommun3 = str_trim(kommun3, side = "both"),
kommun4 = str_trim(kommun4, side = "both"))
tmp_kom <- tmp_health %>%
filter(kommun1 == studkom | kommun1 == "VGR*")
jfr_fp <-  if_else(tmp_kom$y16_9_f > tmp_kom$y16_9_p, "fler", "färre")
jfr_vg <-  if_else(tmp_kom$y16_9_tot[1] > tmp_kom$y16_9_tot[2], "större", "lägre")
xx_9 <- tmp_kom %>%
select(kommun2, y16_9_p, y16_9_f) %>%
gather(key = sex, value = c(y16_9_p, y16_9_f) )
View(xx_9)
xx_9 <- tmp_kom %>%
select(kommun2, y16_9_p, y16_9_f) %>%
gather(key = sex, value = c(y16_9_p, y16_9_f), -kommun2 )
View(xx_9)
names(xx_9) <- c("kommun2", "sex", "value")
ggplot(tmp_kom, aes(x = kommun2, y = value, group = sex))+
geom_bar()
ggplot(xx_9, aes(x = kommun2, y = value, group = sex))+
geom_bar()
ggplot(xx_9, aes(x = kommun2, y = value, group = sex))+
geom_bar(stat = "identity")
ggplot(xx_9, aes(x = kommun2, y = value, fill = sex))+
geom_bar(stat = "identity")
ggplot(xx_9, aes(x = kommun2, y = value, fill = sex))+
geom_bar(stat = "identity", position = "dodge")
ggplot(xx_9, aes(x = sex, y = value, fill = kommun2))+
geom_bar(stat = "identity", position = "dodge")
